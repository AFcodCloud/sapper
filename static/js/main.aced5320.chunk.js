(this.webpackJsonpsapper=this.webpackJsonpsapper||[]).push([[0],{19:function(e,t,n){e.exports=n(32)},24:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(5),s=n.n(i),c=(n(24),n(7)),o=(n(31),n(14)),u=n(15),l=n(18),m=n(16),f=n(6),h=n(2),v=function(e,t,n){return!(!e[t]||!e[t][n])&&e[t][n]},p=function(e,t,n){for(var r=[],a=-1;a<=1;a++)for(var i=-1;i<=1;i++)if(0!==i||0!==a){var s=v(e,t+a,n+i);s&&r.push(s)}return r},b=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)t(e[n][r])},d=function(e,t){for(var n=[t],r=[],a=!0,i=0;a;){a=!1;for(var s=[],c=i;c<n.length;c++){var o,u=p(e,n[c].y,n[c].x),l=Object(f.a)(u);try{var m=function(){var e=o.value;e.isFlag||e.isMine||e.show||e.mineCounter||n.some((function(t){return t.id===e.id}))||s.some((function(t){return t.id===e.id}))?e.mineCounter&&!r.some((function(t){return t.id===e.id}))&&r.push(e):s.push(e)};for(l.s();!(o=l.n()).done;)m()}catch(v){l.e(v)}finally{l.f()}}i++,s.length?(n=[].concat(Object(h.a)(n),s),a=!0):a=!1}return console.log(n),(n=[].concat(Object(h.a)(n),r)).map((function(e){return e.show=!0})),e},g=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)if(e[n][r].id===Number(t))return e[n][r];return!1},y=function(e,t){for(var n=[],r=1,a=0;a<e;a++){for(var i=[],s=0;s<t;s++)i.push({id:r++,show:!1,isMine:!1,isFlag:!1,envBackLight:!1,mineCounter:0,marked:!1,x:s,y:a});n.push(i)}return n},j=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++){var i=e[r][a];i.isMine||i.id===t||n.push(i)}return n[Math.floor(Math.random()*n.length)]},O=function(e){if(9===e[0]&&9===e[1]&&9===e[2])return e;for(var t=e.length-1;t>=0;t--){if(e[t]<9)return e[t]+=1,e;9!==e[t]||(e[t]=0)}},w=function(e){var t=function(e,t){for(var n=0,r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)e[r][a].isFlag&&(n+=1);var i=t-n,s=[];1===(i=i.toString().split("")).length?s=["0","0"].concat(Object(h.a)(i)):2===i.length?s=["0"].concat(Object(h.a)(i)):3===i.length&&(s=Object(h.a)(i));for(var c=0;c<s.length;c++)"-"===s[c]&&(s[c]="minus");return s}(e.matrix,e.mines);return a.a.createElement("div",{className:"flagCount"},t.map((function(e,t){return a.a.createElement("div",{key:t,className:"num-"+e})})))},k=n(17),x=function(e){var t=e.counterArr,n=e.setTick,i=e.isPlay,s=Object(r.useState)(),c=Object(k.a)(s,2),o=c[0],u=c[1];Object(r.useEffect)((function(){if(i){var e=setInterval((function(){n()}),1e3);u(e)}else clearInterval(o)}),[i]);var l=t.map((function(e,t){return a.a.createElement("div",{className:"num-".concat(e),key:t})}));return a.a.createElement("div",{className:"timer"},l)},E=function(e){var t=e.buttonStatus,n=e.setRestart;return a.a.createElement("button",{className:"smileBtn ".concat(t),onClick:n})},M=function(e){var t=e.setLevel;return a.a.createElement("div",{className:"menu"},a.a.createElement("ul",{className:"menuList"},a.a.createElement("li",{onClick:function(){t({size:9,mines:10})}},"\u043d\u043e\u0432\u0438\u0447\u043e\u043a"),a.a.createElement("li",{onClick:function(){t({size:16,mines:40})}},"\u043b\u044e\u0431\u0438\u0442\u0435\u043b\u044c"),a.a.createElement("li",{onClick:function(){t({size:30,mines:99})}},"\u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b")))},L=function(e){var t=e.matrix,n=e.counterArr,r=e.classes,i=e.splitHandlers,s=e.setTick,c=e.buttonStatus,o=e.setRestart,u=e.isPlay,l=e.setLevel,m=e.mines,f=1,h=t.map((function(e){return a.a.createElement("tr",{key:"key"+f++},e.map((function(e){return a.a.createElement("td",{key:e.id,id:e.id,className:r(e),onMouseDown:function(t){return i(t,e.id)},onMouseUp:function(t){return i(t,e.id)},onMouseLeave:i,onContextMenu:function(e){return e.preventDefault()}})})))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(M,{setLevel:l}),a.a.createElement("table",null,a.a.createElement("caption",{className:"header"},a.a.createElement("div",{className:"block"},a.a.createElement(w,{matrix:t,mines:m}),a.a.createElement(E,{buttonStatus:c,setRestart:o}),a.a.createElement(x,{counterArr:n,setTick:s,isPlay:u}))),a.a.createElement("tbody",null,h)))},C=n(1),z=function(e,t,n,r){n||function(e,t,n){for(var r=1;r<=t;r++){var a=j(e,n);a.isMine=!0;var i,s=p(e,a.y,a.x),c=Object(f.a)(s);try{for(c.s();!(i=c.n()).done;){i.value.mineCounter+=1}}catch(o){c.e(o)}finally{c.f()}}}(e,r,t);var a=g(e,t);return a.envBackLight=!1,a.isFlag||(a.show=!0,a.isMine?b(e,(function(e){return e.show=!0})):a.mineCounter||d(e,a)),e},N=function(e,t){var n=g(e,t);return n.show||(n.isFlag=!n.isFlag),e},P=function(e){return b(e,(function(e){return e.envBackLight=!1})),e},S=function(e,t){var n=g(e,t);return!n.isFlag&&n.mineCounter&&n.show?(p(e,n.y,n.x).filter((function(e){return!e.show&&!e.isFlag})).map((function(e){return e.envBackLight=!0})),e):e},A=function(e,t){var n=g(e,t);b(e,(function(e){return e.envBackLight=!1}));var r=p(e,n.y,n.x),a=r.filter((function(e){return e.isFlag})).length,i=r.filter((function(e){return e.isMine})).length;return a!==i||a===i&&a+i!==0&&r.map((function(t){return t.isMine&&!t.isFlag?b(e,(function(e){return e.show=!0})):t.isMine||t.mineCounter?t.isMine||(t.show=!0):d(e,t),e})),e},F=function(e,t){var n=g(e,t);return n.show&&!n.isFlag||(n.envBackLight=!0),e},B=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++){if(e[n][r].isMine&&e[n][r].show)return{buttonStatus:"lose",isPlay:!1};t.push(e[n][r])}return t.every((function(e){return e.show||e.isFlag}))?{buttonStatus:"win",isPlay:!1}:{buttonStatus:"play",isPlay:!0}},R={matrix:[],isPlay:!1,counterArr:[0,0,0],buttonStatus:"play",size:9,mines:10},I=function(e){1===e.nativeEvent.which&&(T.left=!T.left),3===e.nativeEvent.which&&(T.right=!T.right)},T={left:!1,right:!1},D=null,H=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).splitHandlers=function(e,t){switch(e.type){case"mousedown":var n=function(e,t){return I(e),D=t,T.left&&T.right?{type:"bothDown",id:t}:T.left?{type:"pressLeft",id:t}:void 0}(e,t);n&&r.props.setKeyPressInCell(n);break;case"mouseup":r.props.setKeyPressInCell(function(e,t){var n=T.left&&T.right&&(1===e.nativeEvent.which||3===e.nativeEvent.which),r=T.left&&1===e.nativeEvent.which&&!n,a=T.right&&3===e.nativeEvent.which&&!n;return I(e),t!==D?{type:"leave",id:""}:n?{type:"bothUp",id:t}:r?{type:"left",id:t}:a?{type:"right",id:t}:void 0}(e,t));break;case"mouseleave":T.left=!1,T.right=!1;break;default:return}},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=y(this.props.size,this.props.size);this.props.setNewMatrix(e)}},{key:"classes",value:function(e){return e.envBackLight?"backLight":!e.show&&e.isFlag?"flag":e.show?e.show?e.isMine?"mine":e.mineCounter?"n"+e.mineCounter:"clear":void 0:"hidden"}},{key:"render",value:function(){return a.a.createElement(L,{matrix:this.props.matrix,classes:this.classes,splitHandlers:this.splitHandlers,counterArr:this.props.counterArr,isPlay:this.props.isPlay,setTick:this.props.setTick,buttonStatus:this.props.buttonStatus,setRestart:this.props.setRestart,setLevel:this.props.setLevel,mines:this.props.mines})}}]),n}(a.a.Component),W=Object(c.b)((function(e){return{size:e.main.size,mines:e.main.mines,matrix:e.main.matrix,counterArr:e.main.counterArr,buttonStatus:e.main.buttonStatus,isPlay:e.main.isPlay}}),{setNewMatrix:function(e){return{type:"NEWMATRIX",matrix:e}},setKeyPressInCell:function(e){return{type:e.type,id:e.id}},setTick:function(){return{type:"tick"}},setRestart:function(){return{type:"restart"}},setLevel:function(e){return{type:"setLevel",size:e.size,mines:e.mines}}})(H),K=n(9),U=(0,K.createStore)((0,K.combineReducers)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEWMATRIX":return Object(C.a)(Object(C.a)({},e),{},{matrix:Object(h.a)(t.matrix)});case"bothDown":return Object(C.a)(Object(C.a)({},e),{},{matrix:Object(h.a)(S(e.matrix,t.id))});case"bothUp":return Object(C.a)(Object(C.a)({},e),{},{matrix:Object(h.a)(A(e.matrix,t.id))},B(e.matrix));case"pressLeft":return Object(C.a)(Object(C.a)({},e),{},{matrix:Object(h.a)(F(e.matrix,t.id))});case"left":return Object(C.a)(Object(C.a)({},e),{},{matrix:Object(h.a)(z(e.matrix,t.id,e.isPlay,e.mines))},B(e.matrix));case"right":return Object(C.a)(Object(C.a)({},e),{},{matrix:Object(h.a)(N(e.matrix,t.id))},B(e.matrix));case"leave":return Object(C.a)(Object(C.a)({},e),{},{matrix:Object(h.a)(P(e.matrix))});case"tick":return Object(C.a)(Object(C.a)({},e),{},{counterArr:Object(h.a)(O(e.counterArr))});case"restart":return Object(C.a)(Object(C.a)({},R),{},{matrix:Object(h.a)(y(e.size,e.size)),counterArr:[0,0,0],size:e.size,mines:e.mines});case"setLevel":return Object(C.a)(Object(C.a)({},R),{},{size:t.size,mines:t.mines,matrix:Object(h.a)(y(t.size,t.size))});default:return e}}})),J=U;window.store=U;var X=function(){return a.a.createElement(c.a,{store:J},a.a.createElement("div",{className:"App"},a.a.createElement(W,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.aced5320.chunk.js.map